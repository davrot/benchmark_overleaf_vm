services:
  mailsink:
    extends:
      file: ./mailsink/compose.yaml
      service: mailsink

  aiecho:
    extends:
      file: ./aiecho/compose.yaml
      service: aiecho

  overleafredis:
    extends:
      file: ./overleafredis/compose.yaml
      service: overleafredis

  overleafmongo:
    extends:
      file: ./overleafmongo/compose.yaml
      service: overleafmongo

  overleafserver:
    extends:
      file: ./overleafserver/compose.yaml
      service: overleafserver
    depends_on:
      overleafredis:
        condition: service_healthy
      overleafmongo:
        condition: service_healthy
      mailsink:
        condition: service_healthy
      aiecho:
        condition: service_healthy

  nginx:
    extends:
      file: ./nginx/compose.yaml
      service: nginx
    depends_on:
      overleafserver:
        condition: service_healthy

networks:
  overleaf-network:
    external: true

